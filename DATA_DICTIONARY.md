# MigrationReport Data Dictionary

The MigrationReport dataset now mirrors a relational model so the static site can be reasoned about like a database. The JSON files inside `data/` each act as a logical table that can be joined by their identifier fields.

## Table Overview

| File | Purpose | Primary Fields |
| --- | --- | --- |
| `data/categories.json` | Canonical list of evaluation categories. | `id`, `name`, `order` |
| `data/category_keys.json` | Individual evaluation keys that belong to categories. | `id`, `categoryId`, `name`, `guidance` |
| `data/countries.json` | Top-level locations that have full migration reports. | `id`, `name`, `report` |
| `data/cities.json` | City-level reports linked back to their country. | `id`, `countryId`, `name`, `report` |
| `data/people.json` | Persona definitions used for weightings in comparisons. | `id`, `name` |
| `data/person_weights.json` | Weight assignments that join people to categories. | `personId`, `categoryId`, `weight` |

## Relationships

- **Categories → Keys**: Join `categories.id` to `category_keys.categoryId` to determine which keys roll up into each category.
- **Countries → Cities**: Join `countries.id` to `cities.countryId` to list every city nested under a country.
- **People → Weights**: Join `people.id` to `person_weights.personId` to see how each persona scores the categories. Link `person_weights.categoryId` back to `categories.id` to recover the category name.

## Field Notes

### `data/categories.json`
- `id`: Stable slug used as the foreign key target for other tables.
- `name`: Human-readable label displayed in the UI.
- `order`: Optional numeric sort index. Lower numbers render first; ties fall back to alphabetical ordering.

### `data/category_keys.json`
- `id`: Stable slug for the key (used to track edits over time).
- `categoryId`: References `categories.id`.
- `name`: Display label surfaced to users.
- `guidance`: Author guidance for maintaining consistent scoring narratives.

### `data/countries.json`
- `id`: Stable slug that other data (like cities) reference.
- `name`: Display label for the country.
- `report`: Path to the country’s report JSON inside `reports/`.

### `data/cities.json`
- `id`: Stable slug for the city.
- `countryId`: References `countries.id` to tie the city to its parent nation.
- `name`: Display name in the picker.
- `report`: Path to the city’s report JSON inside `reports/`.

### `data/people.json`
- `id`: Stable slug for the persona.
- `name`: Human-readable persona label.

### `data/person_weights.json`
- `personId`: References `people.id`.
- `categoryId`: References `categories.id`.
- `weight`: Numeric weight used when computing persona-aligned scores.

## Derived Structures

The front-end combines these tables at runtime (see `script.js`) to rehydrate the legacy structures:
- `Categories`: Generated by joining categories to keys.
- `Countries`: Generated by joining countries to cities.
- `People`: Generated by pivoting `person_weights` onto each persona.

When adding or updating data, edit the relevant table(s) and the application will reflect the changes without additional build steps.
